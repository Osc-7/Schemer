# -------------------- 全新 Dockerfile 内容开始 --------------------

# 指定基础镜像为 x86-64 架构的 Ubuntu 22.04
FROM --platform=linux/amd64 ubuntu:22.04

# 设置环境变量，防止安装过程中断
ENV DEBIAN_FRONTEND=noninteractive


RUN sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list \
    && apt-get update \
    && apt-get install -y \
    build-essential \
    nasm \
    git \
    chezscheme \
    python3 \
    python3-pip \
    python3-venv \
    python3-setuptools \
    python3-wheel \
    python3-dev \
    libffi-dev \
    libssl-dev \
    libxml2-dev \
    libxslt1-dev \
    libjpeg-dev \
    libfreetype6-dev \ 
    && apt-get clean && rm -rf /var/lib/apt/lists/*

# 在容器内设置一个工作目录，后续命令都在这里执行
WORKDIR /app

# -------------------- 全新 Dockerfile 内容结束 --------------------